<!doctype html>
<html lang="en">
<head>

    <% include partials/page_head %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <script>
        var socket = io();
    </script>

    <!-- Google Maps JS API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC8UgLksCoAWs5n4eG4UsAEpMJsWc3kg_U"></script>
    <script type="text/javascript">
        $(function() {
            window.RestaurantData = <%- JSON.stringify(restaurant[0]) %>;
        });
    </script>
    <script src="/javascripts/gmaps.js"></script>
    <script src="/javascripts/restaurant.js"></script>

</head>

<body>
<% include partials/navbar %>

<main role="main">

    <div class="container">
        <div class="d-flex bd-highlight">
            <div class="p-2 bd-highlight">
                <img src="../<%= restaurant[0].officialPhoto %>" style="width: 65px; height: 65px;" alt="Card image cap">
            </div>
            <div class="p-2 flex-grow-1 bd-highlight">
                <p class="h4"><%= restaurant[0].name %></p>

                <%= restaurant[0].typeOfCuisine.join(", ")%>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <p>
                    <div id="distToRestaurant"></div>
                </p>
                <p>
                    <i class="fa fa-location-arrow" aria-hidden="true"></i> <%= restaurant[0].address.streetName %>, <%= restaurant[0].address.city %>, <%= restaurant[0].address.postcode %>, <%= restaurant[0].address.country %>
                </p>
                <p>
                    <i class="fa fa-phone" aria-hidden="true"></i> <%= restaurant[0].contactDetails.telephone%>
                </p>
                <p>
                    <i class="fa fa-link" aria-hidden="true"></i> <a href="<%=restaurant[0].contactDetails.website%>"><%=restaurant[0].contactDetails.website%></a>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <h5 >Image Gallery</h5>
                <div class="separator-red"></div>

                <img class="img-fluid" src="https://img1.cgtrader.com/items/663571/dd7119d83f/fast-food-restaurant-3d-model-low-poly-max-3ds.jpg
" alt="Card image cap">
            </div>


            <div class="col-12">
                <h5 class="top-1-rem">Map View</h5>
                <div class="separator-red"></div>

                <div id="map"></div>
            </div>


            <div class="col-12">
                <h5 class="top-1-rem">Rating & Comments</h5>
                <div class="separator-red"></div>

                <div class="container">
                    <% include partials/restaurantTotalScore.ejs %>
                </div>
            </div>
        </div>

    <br>

    <div class="container">
        <% restaurant[0].reviews.forEach(function (review) {  %>
            <!--<p><%= review %></p>-->
            <% include partials/displayReview.ejs %>
        <% }) %>
    </div>

    <div id="myReview"></div>

    <br>
    <div style="background: #f1f1f1;">
        <div class="container" >
            <% if (user) {%>
                <% include partials/addReviewForm.ejs %>
            <% }%>
        </div>
    </div>
    <br>

</main>

<footer class="container">
    <p>&copy; Company 2017-2018</p>
</footer>

</body>
</html>